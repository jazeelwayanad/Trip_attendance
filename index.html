<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Mark Attendance</title>
                <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
                    <style>
                            body { font-family: sans-serif; padding: 20px; background: #f0f2f5; display: flex; justify-content: center; }
                                    .card { background: white; width: 100%; max-width: 400px; padding: 30px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-align: center; }
                                            input { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
                                                    button { width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; margin-top: 10px; }
                                                            button:disabled { background: #ccc; }
                                                                    #msg { color: green; font-weight: bold; margin-top: 15px; display: none; padding: 10px; background: #e0fdf4; border-radius: 5px; }
                                                                        </style>
                                                                        </head>
                                                                        <body>

                                                                        <div class="card">
                                                                            <h1>üìç I am Here!</h1>
                                                                                <p style="color:#666;">Enter details to mark attendance</p>
                                                                                    
                                                                                        <input type="text" id="name" placeholder="Your Name">
                                                                                            <input type="number" id="reg" placeholder="Reg No (e.g. 101)">
                                                                                                
                                                                                                    <button id="btn" onclick="sendData()">Mark Present</button>
                                                                                                        <div id="msg">‚úÖ Attendance Marked!</div>
                                                                                                        </div>

                                                                                                        <script>
                                                                                                            // 1. CONFIGURATION
                                                                                                                const UP_URL = "https://tffrnkpxxxhyxztmqhxv.supabase.co";
                                                                                                                    // ‚ö†Ô∏è REPLACE THE TEXT BELOW WITH YOUR 'anon public' KEY (Starts with eyJ...)
                                                                                                                        const UP_KEY = "YOUR_LONG_ANON_KEY_HERE"; 

                                                                                                                            const supabase = window.supabase.createClient(UP_URL, UP_KEY);

                                                                                                                                async function sendData() {
                                                                                                                                        const name = document.getElementById('name').value;
                                                                                                                                                const reg = document.getElementById('reg').value;
                                                                                                                                                        const btn = document.getElementById('btn');

                                                                                                                                                                if(!name || !reg) return alert("Please fill name and Reg No");

                                                                                                                                                                        btn.innerText = "Sending...";
                                                                                                                                                                                btn.disabled = true;

                                                                                                                                                                                        const { error } = await supabase
                                                                                                                                                                                                    .from('attendance')
                                                                                                                                                                                                                .insert([{ student_name: name, reg_no: reg }]);

                                                                                                                                                                                                                        if(error) {
                                                                                                                                                                                                                                    alert("Error: " + error.message);
                                                                                                                                                                                                                                                btn.innerText = "Mark Present";
                                                                                                                                                                                                                                                            btn.disabled = false;
                                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                                                document.getElementById('msg').style.display = 'block';
                                                                                                                                                                                                                                                                                            document.getElementById('name').value = '';
                                                                                                                                                                                                                                                                                                        document.getElementById('reg').value = '';
                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                // Reset button after 3 seconds
                                                                                                                                                                                                                                                                                                                                            setTimeout(() => {
                                                                                                                                                                                                                                                                                                                                                            document.getElementById('msg').style.display = 'none';
                                                                                                                                                                                                                                                                                                                                                                            btn.innerText = "Mark Present";
                                                                                                                                                                                                                                                                                                                                                                                            btn.disabled = false;
                                                                                                                                                                                                                                                                                                                                                                                                        }, 3000);
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                    </script>

                                                                                                                                                                                                                                                                                                                                                                                                                    </body>
                                                                                                                                                                                                                                                                                                                                                                                                                    </html>